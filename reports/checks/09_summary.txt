Notebook prefix: 09
Status: error
Errors:
Attempt 1: Cell execution error in 09_forecasting_pipeline.ipynb: An error occurred while executing the following cell:
------------------
from sklearn.metrics import mean_absolute_error, mean_squared_error

validation_rows = []
for model_name, group in predictions_df.groupby("model_name"):
    y_true = group["y_true"].astype(float).values
    y_pred = group["y_pred"].astype(float).values
    assert len(y_true) == len(y_pred), f"Length mismatch for {model_name}"
    mae = mean_absolute_error(y_true, y_pred)
    rmse = np.sqrt(mean_squared_error(y_true, y_pred))
    denom = y_true.max() - y_true.min()
    nrmse = rmse / denom if denom != 0 else 0
    summary_row = metrics_summary_df[metrics_summary_df["model_name"] == model_name]
    if not summary_row.empty:
        if not np.isclose(summary_row["MAE_mean"].iloc[0], mae, atol=1e-6):
            raise ValueError(f"MAE mismatch for {model_name}")
        if not np.isclose(summary_row["RMSE_mean"].iloc[0], rmse, atol=1e-6):
            raise ValueError(f"RMSE mismatch for {model_name}")
    validation_rows.append({"model_name": model_name, "MAE": mae, "RMSE": rmse, "nRMSE": nrmse})

validation_metrics_df = pd.DataFrame(validation_rows)
display_table(validation_metrics_df, "forecast_metrics_validated")
print("Validated metrics against summary table.")
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mValueError[0m                                Traceback (most recent call last)
[0;32m/var/folders/7l/wr39ns_13xdbtxc49y6l0qjh0000gn/T/ipykernel_78224/1175849027.py[0m in [0;36m<module>[0;34m[0m
[1;32m     15[0m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"MAE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     16[0m         [0;32mif[0m [0;32mnot[0m [0mnp[0m[0;34m.[0m[0misclose[0m[0;34m([0m[0msummary_row[0m[0;34m[[0m[0;34m"RMSE_mean"[0m[0;34m][0m[0;34m.[0m[0miloc[0m[0;34m[[0m[0;36m0[0m[0;34m][0m[0;34m,[0m [0mrmse[0m[0;34m,[0m [0matol[0m[0;34m=[0m[0;36m1e-6[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0;34m[0m[0m
[0;32m---> 17[0;31m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"RMSE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m     18[0m     [0mvalidation_rows[0m[0;34m.[0m[0mappend[0m[0;34m([0m[0;34m{[0m[0;34m"model_name"[0m[0;34m:[0m [0mmodel_name[0m[0;34m,[0m [0;34m"MAE"[0m[0;34m:[0m [0mmae[0m[0;34m,[0m [0;34m"RMSE"[0m[0;34m:[0m [0mrmse[0m[0;34m,[0m [0;34m"nRMSE"[0m[0;34m:[0m [0mnrmse[0m[0;34m}[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     19[0m [0;34m[0m[0m

[0;31mValueError[0m: RMSE mismatch for BestStat
ValueError: RMSE mismatch for BestStat

Traceback (most recent call last):
  File "/Users/samuel/EDS/Energy_Data_Science/scripts/validate_notebooks.py", line 40, in execute_notebook
    client.execute()
  File "/Users/samuel/opt/anaconda3/lib/python3.9/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
from sklearn.metrics import mean_absolute_error, mean_squared_error

validation_rows = []
for model_name, group in predictions_df.groupby("model_name"):
    y_true = group["y_true"].astype(float).values
    y_pred = group["y_pred"].astype(float).values
    assert len(y_true) == len(y_pred), f"Length mismatch for {model_name}"
    mae = mean_absolute_error(y_true, y_pred)
    rmse = np.sqrt(mean_squared_error(y_true, y_pred))
    denom = y_true.max() - y_true.min()
    nrmse = rmse / denom if denom != 0 else 0
    summary_row = metrics_summary_df[metrics_summary_df["model_name"] == model_name]
    if not summary_row.empty:
        if not np.isclose(summary_row["MAE_mean"].iloc[0], mae, atol=1e-6):
            raise ValueError(f"MAE mismatch for {model_name}")
        if not np.isclose(summary_row["RMSE_mean"].iloc[0], rmse, atol=1e-6):
            raise ValueError(f"RMSE mismatch for {model_name}")
    validation_rows.append({"model_name": model_name, "MAE": mae, "RMSE": rmse, "nRMSE": nrmse})

validation_metrics_df = pd.DataFrame(validation_rows)
display_table(validation_metrics_df, "forecast_metrics_validated")
print("Validated metrics against summary table.")
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mValueError[0m                                Traceback (most recent call last)
[0;32m/var/folders/7l/wr39ns_13xdbtxc49y6l0qjh0000gn/T/ipykernel_78224/1175849027.py[0m in [0;36m<module>[0;34m[0m
[1;32m     15[0m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"MAE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     16[0m         [0;32mif[0m [0;32mnot[0m [0mnp[0m[0;34m.[0m[0misclose[0m[0;34m([0m[0msummary_row[0m[0;34m[[0m[0;34m"RMSE_mean"[0m[0;34m][0m[0;34m.[0m[0miloc[0m[0;34m[[0m[0;36m0[0m[0;34m][0m[0;34m,[0m [0mrmse[0m[0;34m,[0m [0matol[0m[0;34m=[0m[0;36m1e-6[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0;34m[0m[0m
[0;32m---> 17[0;31m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"RMSE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m     18[0m     [0mvalidation_rows[0m[0;34m.[0m[0mappend[0m[0;34m([0m[0;34m{[0m[0;34m"model_name"[0m[0;34m:[0m [0mmodel_name[0m[0;34m,[0m [0;34m"MAE"[0m[0;34m:[0m [0mmae[0m[0;34m,[0m [0;34m"RMSE"[0m[0;34m:[0m [0mrmse[0m[0;34m,[0m [0;34m"nRMSE"[0m[0;34m:[0m [0mnrmse[0m[0;34m}[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     19[0m [0;34m[0m[0m

[0;31mValueError[0m: RMSE mismatch for BestStat
ValueError: RMSE mismatch for BestStat


Attempt 2: Cell execution error in 09_forecasting_pipeline.ipynb: An error occurred while executing the following cell:
------------------
from sklearn.metrics import mean_absolute_error, mean_squared_error

validation_rows = []
for model_name, group in predictions_df.groupby("model_name"):
    y_true = group["y_true"].astype(float).values
    y_pred = group["y_pred"].astype(float).values
    assert len(y_true) == len(y_pred), f"Length mismatch for {model_name}"
    mae = mean_absolute_error(y_true, y_pred)
    rmse = np.sqrt(mean_squared_error(y_true, y_pred))
    denom = y_true.max() - y_true.min()
    nrmse = rmse / denom if denom != 0 else 0
    summary_row = metrics_summary_df[metrics_summary_df["model_name"] == model_name]
    if not summary_row.empty:
        if not np.isclose(summary_row["MAE_mean"].iloc[0], mae, atol=1e-6):
            raise ValueError(f"MAE mismatch for {model_name}")
        if not np.isclose(summary_row["RMSE_mean"].iloc[0], rmse, atol=1e-6):
            raise ValueError(f"RMSE mismatch for {model_name}")
    validation_rows.append({"model_name": model_name, "MAE": mae, "RMSE": rmse, "nRMSE": nrmse})

validation_metrics_df = pd.DataFrame(validation_rows)
display_table(validation_metrics_df, "forecast_metrics_validated")
print("Validated metrics against summary table.")
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mValueError[0m                                Traceback (most recent call last)
[0;32m/var/folders/7l/wr39ns_13xdbtxc49y6l0qjh0000gn/T/ipykernel_78385/1175849027.py[0m in [0;36m<module>[0;34m[0m
[1;32m     15[0m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"MAE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     16[0m         [0;32mif[0m [0;32mnot[0m [0mnp[0m[0;34m.[0m[0misclose[0m[0;34m([0m[0msummary_row[0m[0;34m[[0m[0;34m"RMSE_mean"[0m[0;34m][0m[0;34m.[0m[0miloc[0m[0;34m[[0m[0;36m0[0m[0;34m][0m[0;34m,[0m [0mrmse[0m[0;34m,[0m [0matol[0m[0;34m=[0m[0;36m1e-6[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0;34m[0m[0m
[0;32m---> 17[0;31m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"RMSE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m     18[0m     [0mvalidation_rows[0m[0;34m.[0m[0mappend[0m[0;34m([0m[0;34m{[0m[0;34m"model_name"[0m[0;34m:[0m [0mmodel_name[0m[0;34m,[0m [0;34m"MAE"[0m[0;34m:[0m [0mmae[0m[0;34m,[0m [0;34m"RMSE"[0m[0;34m:[0m [0mrmse[0m[0;34m,[0m [0;34m"nRMSE"[0m[0;34m:[0m [0mnrmse[0m[0;34m}[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     19[0m [0;34m[0m[0m

[0;31mValueError[0m: RMSE mismatch for BestStat
ValueError: RMSE mismatch for BestStat

Traceback (most recent call last):
  File "/Users/samuel/EDS/Energy_Data_Science/scripts/validate_notebooks.py", line 40, in execute_notebook
    client.execute()
  File "/Users/samuel/opt/anaconda3/lib/python3.9/site-packages/nbclient/util.py", line 84, in wrapped
    return just_run(coro(*args, **kwargs))
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
from sklearn.metrics import mean_absolute_error, mean_squared_error

validation_rows = []
for model_name, group in predictions_df.groupby("model_name"):
    y_true = group["y_true"].astype(float).values
    y_pred = group["y_pred"].astype(float).values
    assert len(y_true) == len(y_pred), f"Length mismatch for {model_name}"
    mae = mean_absolute_error(y_true, y_pred)
    rmse = np.sqrt(mean_squared_error(y_true, y_pred))
    denom = y_true.max() - y_true.min()
    nrmse = rmse / denom if denom != 0 else 0
    summary_row = metrics_summary_df[metrics_summary_df["model_name"] == model_name]
    if not summary_row.empty:
        if not np.isclose(summary_row["MAE_mean"].iloc[0], mae, atol=1e-6):
            raise ValueError(f"MAE mismatch for {model_name}")
        if not np.isclose(summary_row["RMSE_mean"].iloc[0], rmse, atol=1e-6):
            raise ValueError(f"RMSE mismatch for {model_name}")
    validation_rows.append({"model_name": model_name, "MAE": mae, "RMSE": rmse, "nRMSE": nrmse})

validation_metrics_df = pd.DataFrame(validation_rows)
display_table(validation_metrics_df, "forecast_metrics_validated")
print("Validated metrics against summary table.")
------------------

[0;31m---------------------------------------------------------------------------[0m
[0;31mValueError[0m                                Traceback (most recent call last)
[0;32m/var/folders/7l/wr39ns_13xdbtxc49y6l0qjh0000gn/T/ipykernel_78385/1175849027.py[0m in [0;36m<module>[0;34m[0m
[1;32m     15[0m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"MAE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     16[0m         [0;32mif[0m [0;32mnot[0m [0mnp[0m[0;34m.[0m[0misclose[0m[0;34m([0m[0msummary_row[0m[0;34m[[0m[0;34m"RMSE_mean"[0m[0;34m][0m[0;34m.[0m[0miloc[0m[0;34m[[0m[0;36m0[0m[0;34m][0m[0;34m,[0m [0mrmse[0m[0;34m,[0m [0matol[0m[0;34m=[0m[0;36m1e-6[0m[0;34m)[0m[0;34m:[0m[0;34m[0m[0;34m[0m[0m
[0;32m---> 17[0;31m             [0;32mraise[0m [0mValueError[0m[0;34m([0m[0;34mf"RMSE mismatch for {model_name}"[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[0m[1;32m     18[0m     [0mvalidation_rows[0m[0;34m.[0m[0mappend[0m[0;34m([0m[0;34m{[0m[0;34m"model_name"[0m[0;34m:[0m [0mmodel_name[0m[0;34m,[0m [0;34m"MAE"[0m[0;34m:[0m [0mmae[0m[0;34m,[0m [0;34m"RMSE"[0m[0;34m:[0m [0mrmse[0m[0;34m,[0m [0;34m"nRMSE"[0m[0;34m:[0m [0mnrmse[0m[0;34m}[0m[0;34m)[0m[0;34m[0m[0;34m[0m[0m
[1;32m     19[0m [0;34m[0m[0m

[0;31mValueError[0m: RMSE mismatch for BestStat
ValueError: RMSE mismatch for BestStat

